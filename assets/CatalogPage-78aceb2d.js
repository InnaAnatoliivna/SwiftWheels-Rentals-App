import{s as h,a as n,r as t,c as d,j as e,C as j,L as k,f as A,b as P}from"./index-7e0d5cfc.js";import{u as E,s as C,a as D,b as S,c as w,d as y,D as b,A as F,L as R}from"./DropdownMake-b76e838c.js";import"./Button-1636f54e.js";const B=h.div`
    position: relative;
`,G=()=>{const a=E(),s=n(C),f=n(D),r=n(S),c=n(w),u=n(y),[g,i]=t.useState(!1),[p,m]=t.useState(null),[v,x]=t.useState(null);t.useEffect(()=>{a(d())},[]),t.useEffect(()=>{(async()=>{try{i(!0),await a(A()),i(!1),a(d())}catch(o){console.error("Error fetching adverts: ",o),i(!1)}})()},[a,c]),t.useEffect(()=>{const l=Array.from(new Set(s.map(o=>o.make).flat()));x(l),r&&m(s.filter(o=>r.includes(o.make)))},[s,r]);const L=()=>{a(P(c+1))},M=(s==null?void 0:s.length)<c*u;return e.jsx(j,{children:e.jsx(B,{children:f||g?e.jsx(k,{}):e.jsxs(e.Fragment,{children:[e.jsx(b,{makes:v}),e.jsx(F,{adverts:r?p:s}),!M&&!r&&e.jsx(R,{onLoadMore:L})]})})})};export{G as default};
